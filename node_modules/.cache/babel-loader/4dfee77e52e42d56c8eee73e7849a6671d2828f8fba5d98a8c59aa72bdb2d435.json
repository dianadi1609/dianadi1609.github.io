{"ast":null,"code":"import'./recipeslist.css';import{useEffect,useState}from\"react\";import axios from\"axios\";import React from\"react\";import Stack from'@mui/material/Stack';import{Link}from\"react-router-dom\";import{ReactComponent as Like}from\"../../assets/img/like.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const baseURL=\"https://api.edamam.com/api/recipes/v2\";const type=\"public\";const query=\"popular\";const apiKey=\"e0726941d4b3edb3980f1cb5f23ac4b2\";const apiId=\"ea0d8161\";function RecipesList(){const[recipes,setRecipes]=useState(null);const[search,setSearch]=useState('');const[error,setError]=useState(null);const[liked,setLiked]=useState(()=>{let items=[];for(let i=0;i<localStorage.length;i++){let key=localStorage.key(i);if(!key.indexOf('label-')){items.push(key.replace('label-',''));}}return items;});const setWishList=event=>{event.preventDefault();let label=event.target.parentNode.parentNode.attributes.getNamedItem('data-label').value;let isFavourited=liked.includes(label);if(!isFavourited){let newItem=[...liked,label];setLiked(newItem);for(let i=0;i<recipes.length;i++){if(recipes[i].recipe.label==label){window.localStorage.setItem('label-'+label,JSON.stringify(recipes[i]));}}}else{let newItem=liked.filter(savedId=>savedId!==label);console.log(newItem);setLiked(newItem);window.localStorage.removeItem('label-'+label);}};function searchRecipe(e){e.preventDefault();axios.get(baseURL,{params:{type:type,app_id:apiId,app_key:apiKey,query:search,q:search}}).then(response=>{setRecipes(response.data.hits);}).catch(error=>{setError(error);});}function getRecipes(){axios.get(baseURL,{params:{type:type,app_id:apiId,app_key:apiKey,q:query}}).then(response=>{setRecipes(response.data.hits);}).catch(error=>{setError(error);});}useEffect(()=>{getRecipes();},[]);if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:/*#__PURE__*/_jsx(\"h2\",{children:error})});}else if(recipes){const items=recipes.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"recipe\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:setWishList,\"data-label\":item.recipe.label,className:liked.includes(item.recipe.label)?\"wishlist liked\":\"wishlist\",children:/*#__PURE__*/_jsx(Like,{})}),/*#__PURE__*/_jsx(\"img\",{src:item.recipe.image}),/*#__PURE__*/_jsx(\"h2\",{children:item.recipe.label}),/*#__PURE__*/_jsxs(\"div\",{className:\"caloriesandtype\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Calories: \",item.recipe.calories]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Cuisine type: \",item.recipe.cuisineType]}),/*#__PURE__*/_jsx(Link,{to:item.recipe.url,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Link to the recipe\"})]})]},index));return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:searchRecipe,className:\"search\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-items \",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"search for recipes\",type:\"text\",value:search,onChange:e=>setSearch(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Search\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"recipessearch\",children:items})]});}}export default RecipesList;","map":{"version":3,"names":["useEffect","useState","axios","React","Stack","Link","ReactComponent","Like","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","baseURL","type","query","apiKey","apiId","RecipesList","recipes","setRecipes","search","setSearch","error","setError","liked","setLiked","items","i","localStorage","length","key","indexOf","push","replace","setWishList","event","preventDefault","label","target","parentNode","attributes","getNamedItem","value","isFavourited","includes","newItem","recipe","window","setItem","JSON","stringify","filter","savedId","console","log","removeItem","searchRecipe","e","get","params","app_id","app_key","q","then","response","data","hits","catch","getRecipes","className","children","map","item","index","onClick","src","image","calories","cuisineType","to","url","rel","onSubmit","placeholder","onChange"],"sources":["/Users/dianadi/newfood/src/components/recipesList/RecipesList.jsx"],"sourcesContent":["import './recipeslist.css';\r\nimport {useEffect, useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport React from \"react\";\r\nimport Stack from '@mui/material/Stack';\r\nimport {Link} from \"react-router-dom\";\r\nimport { ReactComponent as Like } from \"../../assets/img/like.svg\";\r\n\r\nconst baseURL = \"https://api.edamam.com/api/recipes/v2\";\r\nconst type = \"public\";\r\nconst query = \"popular\"\r\nconst apiKey = \"e0726941d4b3edb3980f1cb5f23ac4b2\";\r\nconst apiId = \"ea0d8161\";\r\n\r\nfunction RecipesList() {\r\n  const [recipes, setRecipes] = useState(null);\r\n  const [search, setSearch] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const [liked, setLiked] = useState(() => {\r\n    let items = [];\r\n    for(let i = 0; i < localStorage.length; i++) {\r\n      let key = localStorage.key(i);\r\n      if (!key.indexOf('label-')) {\r\n        items.push(key.replace('label-',''));\r\n      }\r\n    }\r\n    return items;\r\n  });\r\n\r\n  const setWishList = (event) => {\r\n     event.preventDefault();\r\n     let label = event.target.parentNode.parentNode.attributes.getNamedItem('data-label').value;\r\n     let isFavourited = liked.includes(label)\r\n     if (!isFavourited) {\r\n       let newItem = [...liked, label]\r\n       setLiked(newItem);\r\n       for (let i = 0; i < recipes.length; i++) {\r\n         if (recipes[i].recipe.label == label) {\r\n           window.localStorage.setItem('label-' + label, JSON.stringify(recipes[i]));\r\n         }\r\n       }\r\n     } else {\r\n       let newItem = liked.filter((savedId) => savedId !== label)\r\n       console.log(newItem)\r\n       setLiked(newItem);\r\n       window.localStorage.removeItem('label-' + label, );\r\n     }\r\n  }\r\n  \r\n  function searchRecipe (e) {\r\n    e.preventDefault();\r\n        axios.get(baseURL, {\r\n      params: {\r\n        type: type,\r\n        app_id: apiId,\r\n        app_key: apiKey,\r\n        query: search,\r\n        q: search,\r\n    }\r\n  })\r\n    .then(response => {\r\n      setRecipes(response.data.hits);\r\n    })\r\n    .catch(error => {\r\n      setError(error);\r\n    })\r\n  }\r\n\r\n  function getRecipes () {\r\n    axios.get(baseURL, {\r\n      params: {\r\n        type: type,\r\n        app_id: apiId,\r\n        app_key: apiKey,\r\n        q: query,\r\n      }\r\n  })\r\n    .then(response => {\r\n      setRecipes(response.data.hits);\r\n    })\r\n    .catch(error => {\r\n      setError(error);\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    getRecipes();\r\n  }, []);\r\n\r\n  if (error) {\r\n    return <div className=\"error\">\r\n      <h2>{error}</h2>\r\n    </div>;\r\n  } else if (recipes) {\r\n    const items = recipes.map((item, index) =>\r\n        <div key={index} className=\"recipe\">\r\n            <div onClick={setWishList} data-label={item.recipe.label} className={liked.includes(item.recipe.label) ? \"wishlist liked\" : \"wishlist\"}>\r\n              <Like></Like>\r\n            </div>\r\n            <img src={item.recipe.image}/>\r\n            <h2>{item.recipe.label}</h2>\r\n          <div className='caloriesandtype'>\r\n            <p>Calories: {item.recipe.calories}</p>\r\n            <h4>Cuisine type: {item.recipe.cuisineType}</h4>\r\n            <Link to={item.recipe.url} target=\"_blank\" rel=\"noopener noreferrer\">Link to the recipe</Link>\r\n          </div>\r\n        </div>\r\n    );\r\n    return (\r\n      <>\r\n      <form \r\n        onSubmit={searchRecipe}\r\n        className='search'\r\n      >\r\n        <div className='form-items '>\r\n        <input placeholder='search for recipes'\r\n          type=\"text\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          />\r\n        <button type=\"submit\">Search</button>\r\n        </div>\r\n      </form>\r\n      <div className= \"recipessearch\">\r\n       {items}\r\n      </div>\r\n      </>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default RecipesList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}